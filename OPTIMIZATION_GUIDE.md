# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ SMART RAG Agent

## –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∏—Ç–µ—Ä–∞—Ü–∏–π

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `‚ùå –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∏—Ç–µ—Ä–∞—Ü–∏–π`, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ Qwen3 –Ω–µ —Å–º–æ–≥–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—å –ø–æ–∏—Å–∫ –∑–∞ –æ—Ç–≤–µ–¥–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫.

## –ß—Ç–æ –±—ã–ª–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ (2025-10-16)

### 1. ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –ø–µ—Ä–µ–ø–∏—Å–∞–Ω
**–ë—ã–ª–æ:** –û–±—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –±–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
**–°—Ç–∞–ª–æ:** –ß–µ—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –Ω–∞ 2-3 –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

```python
–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:
- –ù–ï –¥–µ–ª–∞–π –±–æ–ª—å—à–µ 3 –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤!
- –ï—Å–ª–∏ –ø–æ—Å–ª–µ 2 –≤—ã–∑–æ–≤–æ–≤ –Ω–∞—à–µ–ª —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ - –æ—Ç–≤–µ—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ
- –ù–ï –∂–¥–∏ "–ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏" - –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ —á—Ç–æ –µ—Å—Ç—å
- –õ—É—á—à–µ —á–∞—Å—Ç–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç –ß–ï–ú –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ –∏—Ç–µ—Ä–∞—Ü–∏–π
```

### 2. ‚úÖ –õ–∏–º–∏—Ç –∏—Ç–µ—Ä–∞—Ü–∏–π —É–≤–µ–ª–∏—á–µ–Ω
**–ë—ã–ª–æ:** 7 –∏—Ç–µ—Ä–∞—Ü–∏–π
**–°—Ç–∞–ª–æ (2025-10-16 v1):** 10 –∏—Ç–µ—Ä–∞—Ü–∏–π
**–°—Ç–∞–ª–æ (2025-10-16 v2):** 15 –∏—Ç–µ—Ä–∞—Ü–∏–π (–¥–ª—è –º–æ—â–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤!)

### 3. ‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
–ù–∞ 10-–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (`tool_choice="none"`)
- –î–æ–±–∞–≤–ª—è–µ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç—Ä–µ–±—É—é—â–µ–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- –ü—Ä–∏–Ω—É–∂–¥–∞–µ—Ç Qwen3 –¥–∞—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ—é—â–µ–π—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

```python
force_stop_threshold = 10  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ 10-–π –∏—Ç–µ—Ä–∞—Ü–∏–∏

if iteration >= (force_stop_threshold - 1):  # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞!
    messages.append({
        "role": "system",
        "content": "–í–ù–ò–ú–ê–ù–ò–ï! –ù–ï–ú–ï–î–õ–ï–ù–ù–û –¥–∞–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç!"
    })
    tool_choice = "none"  # –ë–ª–æ–∫–∏—Ä—É–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
```

### 4. ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–æ–∫–µ–Ω–æ–≤ —É–≤–µ–ª–∏—á–µ–Ω
**–ë—ã–ª–æ:** 16000 —Ç–æ–∫–µ–Ω–æ–≤
**–°—Ç–∞–ª–æ:** 20000 —Ç–æ–∫–µ–Ω–æ–≤
**–ü–æ—Ä–æ–≥ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏:** 14000 —Ç–æ–∫–µ–Ω–æ–≤

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∑–∞ —Ä–∞–∑
- –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π
- –†–∞–±–æ—Ç–∞—Ç—å —Å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏

### 5. ‚úÖ –£–ª—É—á—à–µ–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

**grep_search:**
```python
return {
    "found": len(results),
    "results": results,  # –¢–µ–ø–µ—Ä—å –í–°–ï —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–±—ã–ª–æ: –ø–µ—Ä–≤—ã–µ 10)
    "message": "–ù–∞–π–¥–µ–Ω–æ X —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π. –≠—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ—Ç–≤–µ—Ç–∞."
}
```

**rag_semantic_search:**
```python
return {
    "found": len(results),
    "documents": results,
    "message": "–ù–∞–π–¥–µ–Ω–æ X –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –≠—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞!"
}
```

–¢–µ–ø–µ—Ä—å Qwen3 –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É –∫–æ–≥–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é

### –®–∞–≥ 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
```bash
# –ó–∞–∫—Ä–æ–π—Ç–µ —Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å
taskkill /F /FI "WINDOWTITLE eq *rag_smart_qwen.py*"

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
start_smart_agent.bat
```

### –®–∞–≥ 2: –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å SMART Agent"
–í—ã —É–≤–∏–¥–∏—Ç–µ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
‚úÖ SMART Agent –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!
üéØ –ö–æ–Ω—Ç–µ–∫—Å—Ç: 20000 —Ç–æ–∫–µ–Ω–æ–≤ (—É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π!)
üîÑ –ò—Ç–µ—Ä–∞—Ü–∏–π: –¥–æ 15 (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ 10-–π)
üí™ –†–µ—Å—É—Ä—Å—ã: –ú–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä - –±–æ–ª—å—à–µ –∏—Ç–µ—Ä–∞—Ü–∏–π!
‚ö° –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∏—Å–∫–∞ - –º–µ–Ω—å—à–µ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è!
```

### –®–∞–≥ 3: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∑–∞–ø—Ä–æ—Å
–ù–∞–ø—Ä–∏–º–µ—Ä: `–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –≥–∏–ø–µ—Ä–∫–æ—Å–º–∏—á–µ—Å–∫–∏–º –∫–∞–Ω–∞–ª–æ–º`

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:
1. –°–¥–µ–ª–∞–µ—Ç 1-2 —Ü–µ–ª–µ–≤—ã—Ö –ø–æ–∏—Å–∫–∞
2. –ï—Å–ª–∏ –Ω–∞–π–¥–µ—Ç –º–∞–ª–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ - —Å–¥–µ–ª–∞–µ—Ç –µ—â–µ 1-2 –ø–æ–ø—ã—Ç–∫–∏
3. –ù–∞ 6-–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∏ –¥–∞—Å—Ç –æ—Ç–≤–µ—Ç
4. –ù–µ –ø—Ä–µ–≤—ã—Å–∏—Ç –ª–∏–º–∏—Ç –≤ 10 –∏—Ç–µ—Ä–∞—Ü–∏–π

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã

### –õ–æ–≥–∏ –≤ real-time
–û—Ç–∫—Ä–æ–π—Ç–µ `smart_agent.log` –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ:

```
2025-10-16 00:18:09 - INFO - SMART QUESTION: –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã...
2025-10-16 00:18:09 - INFO - --- Iteration 1 ---
2025-10-16 00:18:10 - INFO - Calling: rag_semantic_search(...)
2025-10-16 00:18:11 - INFO - [TOOL] rag_semantic_search: –Ω–∞–π–¥–µ–Ω–æ 15 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2025-10-16 00:18:12 - INFO - --- Iteration 2 ---
2025-10-16 00:18:13 - WARNING - ‚ö†Ô∏è –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –∏—Ç–µ—Ä–∞—Ü–∏–∏ 6
2025-10-16 00:18:15 - INFO - FINAL ANSWER LENGTH: 1847 chars
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Gradio
–í —Å–µ–∫—Ü–∏–∏ "üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã" –≤–∏–¥–Ω–æ:
```
üîß 1. rag_semantic_search(query=–≥–∏–ø–µ—Ä–∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–∞–Ω–∞–ª, num_sources=30)
üîß 2. grep_search(query=–≥–∏–ø–µ—Ä–∫–æ—Å–º–∏—á–µ—Å–∫–∏–π, context_lines=5)

üìä –ò—Ç–µ—Ä–∞—Ü–∏–π: 2
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –µ—â–µ –±–æ–ª—å—à–µ –∏—Ç–µ—Ä–∞—Ü–∏–π
–í `rag_smart_qwen.py` —Å—Ç—Ä–æ–∫–∞ 489-490:
```python
max_iterations = 20  # –£–≤–µ–ª–∏—á—å—Ç–µ –¥–æ 20 (–¥–ª—è –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
force_stop_threshold = 15  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ 15-–π
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –º–µ–Ω—å—à–µ (—ç–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏)
```python
max_iterations = 10  # –£–º–µ–Ω—å—à–∏—Ç–µ –¥–æ 10
force_stop_threshold = 7  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ 7-–π
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
```python
max_context_tokens = 24000  # –î–ª—è GPU —Å 32GB VRAM
summarize_threshold = 17000
```

### –ï—Å–ª–∏ –º–∞–ª–æ VRAM (< 20GB)
```python
max_context_tokens = 12000  # –£–º–µ–Ω—å—à–∏—Ç–µ
summarize_threshold = 8000
```

## –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ—Å—Ç–æ–π –≤–æ–ø—Ä–æ—Å –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–∞–Ω–∞–ª
**–í–æ–ø—Ä–æ—Å:** "–ß—Ç–æ —Ç–∞–∫–æ–µ –ú–µ–∫—Ç–∞–±—É?"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ò—Ç–µ—Ä–∞—Ü–∏—è 1: `rag_semantic_search("–ú–µ–∫—Ç–∞–±—É", num_sources=30)` ‚Üí 20 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò—Ç–µ—Ä–∞—Ü–∏—è 2: –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
- **–ò—Ç–æ–≥–æ: 2 –∏—Ç–µ—Ä–∞—Ü–∏–∏**

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å
**–í–æ–ø—Ä–æ—Å:** "–ö–∞–∫–∏–µ –∫–∞–Ω–∞–ª—ã –∑–∞—â–∏—â–∞—é—Ç –æ—Ç —Å—É—â–Ω–æ—Å—Ç–µ–π?"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ò—Ç–µ—Ä–∞—Ü–∏—è 1: `rag_semantic_search("–∑–∞—â–∏—Ç–∞ –æ—Ç —Å—É—â–Ω–æ—Å—Ç–µ–π –∫–∞–Ω–∞–ª—ã", num_sources=50)` ‚Üí 35 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò—Ç–µ—Ä–∞—Ü–∏—è 2: –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
- **–ò—Ç–æ–≥–æ: 2 –∏—Ç–µ—Ä–∞—Ü–∏–∏**

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–ª–æ–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å —Å —É—Ç–æ—á–Ω–µ–Ω–∏—è–º–∏
**–í–æ–ø—Ä–æ—Å:** "–ö–∞–∫–∏–µ —Ä–∞—Å—à–∏—Ä—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ú–µ–∫—Ç–∞–±—É?"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ò—Ç–µ—Ä–∞—Ü–∏—è 1: `grep_search("–ú–µ–∫—Ç–∞–±—É")` ‚Üí 12 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò—Ç–µ—Ä–∞—Ü–∏—è 2: `rag_semantic_search("—Ä–∞—Å—à–∏—Ä—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∫–∞–Ω–∞–ª")` ‚Üí 15 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò—Ç–µ—Ä–∞—Ü–∏—è 3: –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
- **–ò—Ç–æ–≥–æ: 3 –∏—Ç–µ—Ä–∞—Ü–∏–∏**

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –û—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π/–Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å
**–í–æ–ø—Ä–æ—Å:** "–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –≥–∏–ø–µ—Ä–∫–æ—Å–º–∏—á–µ—Å–∫–∏–º –∫–∞–Ω–∞–ª–æ–º"

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ò—Ç–µ—Ä–∞—Ü–∏—è 1-5: –†–∞–∑–ª–∏—á–Ω—ã–µ –ø–æ–∏—Å–∫–∏
- –ò—Ç–µ—Ä–∞—Ü–∏—è 6: ‚ö†Ô∏è –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ
- **–ò—Ç–æ–≥–æ: 6 –∏—Ç–µ—Ä–∞—Ü–∏–π (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ)**

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –í—Å–µ —Ä–∞–≤–Ω–æ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç

**–†–µ—à–µ–Ω–∏–µ 1:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
```bash
grep "max_iterations = 10" rag_smart_qwen.py
# –î–æ–ª–∂–Ω–æ –Ω–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É 431
```

**–†–µ—à–µ–Ω–∏–µ 2:** –£–º–µ–Ω—å—à–∏—Ç–µ –ø–æ—Ä–æ–≥ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
```python
force_stop_threshold = 4  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–Ω—å—à–µ
```

**–†–µ—à–µ–Ω–∏–µ 3:** –°–¥–µ–ª–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º
- ‚ùå "–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å –≥–∏–ø–µ—Ä–∫–æ—Å–º–∏—á–µ—Å–∫–∏–º –∫–∞–Ω–∞–ª–æ–º"
- ‚úÖ "—á—Ç–æ —Ç–∞–∫–æ–µ –≥–∏–ø–µ—Ä–∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–∞–Ω–∞–ª?"

### –ü—Ä–æ–±–ª–µ–º–∞: –û—Ç–≤–µ—Ç—ã —Å—Ç–∞–ª–∏ —Ö—É–∂–µ –∫–∞—á–µ—Å—Ç–≤–æ–º

**–ü—Ä–∏—á–∏–Ω–∞:** –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á—å—Ç–µ –ø–æ—Ä–æ–≥ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
```python
force_stop_threshold = 8  # –ë–æ–ª—å—à–µ –∏—Ç–µ—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–¥ –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π
```

### –ü—Ä–æ–±–ª–µ–º–∞: Out of memory (CUDA)

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ç–µ–∫—Å—Ç 20000 —Ç–æ–∫–µ–Ω–æ–≤ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π

**–†–µ—à–µ–Ω–∏–µ:** –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç
```python
max_context_tokens = 16000
summarize_threshold = 11000
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ (—Ü–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏)
- **–ü—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã:** 5-10 —Å–µ–∫—É–Ω–¥ (1-2 –∏—Ç–µ—Ä–∞—Ü–∏–∏)
- **–°—Ä–µ–¥–Ω–∏–µ –≤–æ–ø—Ä–æ—Å—ã:** 10-20 —Å–µ–∫—É–Ω–¥ (2-4 –∏—Ç–µ—Ä–∞—Ü–∏–∏)
- **–°–ª–æ–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã:** 20-40 —Å–µ–∫—É–Ω–¥ (4-6 –∏—Ç–µ—Ä–∞—Ü–∏–π)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ VRAM
```
Qwen3-30B-A3B: 18GB
Embeddings: 2-3GB
–ë—É—Ñ–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞: 1-2GB
–ò—Ç–æ–≥–æ: ~22GB (–∏–∑ 24GB RTX 3090)
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM
```
–í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞: 4-6GB
Python –ø—Ä–æ—Ü–µ—Å—Å: 2-4GB
–ë—É—Ñ–µ—Ä—ã: 1-2GB
–ò—Ç–æ–≥–æ: ~10GB (–∏–∑ 32GB)
```

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2025-10-16: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚úÖ –õ–∏–º–∏—Ç –∏—Ç–µ—Ä–∞—Ü–∏–π: 7 ‚Üí 10
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–æ–∫–µ–Ω–æ–≤: 16000 ‚Üí 20000
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ 6-–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–∏—Å–∫–∞ –≤ –ø—Ä–æ–º–ø—Ç–µ

### 2025-10-15: –ò—Å—Ö–æ–¥–Ω–∞—è –≤–µ—Ä—Å–∏—è
- –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è function calling
- 7 –∏—Ç–µ—Ä–∞—Ü–∏–π –º–∞–∫—Å–∏–º—É–º
- 16000 —Ç–æ–∫–µ–Ω–æ–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
```python
max_iterations = 5
force_stop_threshold = 3
max_context_tokens = 12000
```

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
```python
max_iterations = 15
force_stop_threshold = 10
max_context_tokens = 24000  # –ï—Å–ª–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç VRAM
```

### –ë–∞–ª–∞–Ω—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```python
max_iterations = 10  # –¢–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
force_stop_threshold = 6
max_context_tokens = 20000
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **–û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `SMART_AGENT_README.md`
- **–õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã:** `smart_agent.log`
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–º—è—Ç–∏:** `rag_advanced_memory.py`
- **–ë–∞—Ç–Ω–∏–∫ –¥–ª—è –∑–∞–ø—É—Å–∫–∞:** `start_smart_agent.bat`

---

**ü§ñ Generated with Claude Code**
Co-Authored-By: Claude <noreply@anthropic.com>

–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2025-10-16
